{% extends "layout.html" %}
{% block content %}
      <p>
        {% if session.user_id %}
        <p>Welcome back, {{ session.username }}</p>
        <form action="/new_task" method="POST">
          <div class="form-group">
            <label for="new_task">Create a new task</label>
            <input type="text" class="form-control" id="new_task" name="new_task">
            <!--Choose prio-->
            <fieldset class="form-group">
              <div class="row">
                <legend class="col-form-label col-sm-2 pt-0">Priority</legend>
                <div class="col-sm-10">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="priority" id="gridRadios1" value="1" checked>
                    <label class="form-check-label" for="gridRadios1">
                      High
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="priority" id="gridRadios2" value="2">
                    <label class="form-check-label" for="gridRadios2">
                      Medium
                    </label>

                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="priority" id="gridRadios3" value="3">
                    <label class="form-check-label" for="gridRadios3">
                      Low
                    </label>
                  </div>
                </div>
              </div>
            </fieldset>
            <button type="submit" class="btn btn-primary">Submit</button>
            
            <!--Choose prio-->
          </div>
          <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        </form>
        <div class="col-sm-10">
        </div>
        <ul>
          {% for task in tasks %}
            <div class="list-group">
              <a href="/tasks/{{ task[3] }}" class="list-group-item list-group-item-action">
                <div class="d-flex w-100 justify-content-between">
                  <h5 class="mb-1">{{ task[0] }}</h5>
                  <small>{{ task[2] }}</small>
                </div>
                <p class="mb-1">{{ task[4] }}</p>
                <small>Prio: {{ task[1] }}</small>
              </a>
            </div>
    
            {% endfor %}
        </ul>

        
        <a href="/logout">Log Out</a>
        {% else %}
        A quick and easy way to keep track of your tasks.
      <p>
        Start by logging in!
        <form action="/login" method="POST">
            <div class="form-group">
              <label for="username">Username</label>
              <input type="text" name="username" class="form-control" id="username">
              <small id="emailHelp" class="form-text text-muted"></small>
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input type="password" name="password" class="form-control" id="password">
            </div>
            
            <button type="submit" class="btn btn-primary">Log In</button>
          </form>
          <a href="/register">Click here to register!</a>
          {% endif %}
    </div>
    <div class="col-4">
      <h2>Did you know?</h2>
      <p>
        Vestibulum at consectetur mi, vel ultrices leo. Nam rhoncus viverra velit, sed pretium tortor ultricies a. In ullamcorper metus sem, vel porttitor erat volutpat euismod. Nulla facilisi. Nam facilisis, odio quis condimentum fringilla, risus eros vehicula leo, a malesuada odio ante sit amet mauris. Praesent accumsan massa ut lorem pulvinar, non luctus erat laoreet. Etiam pulvinar libero at sapien lacinia, et vulputate nunc semper. Maecenas lobortis diam eu neque ultricies tempor. Vivamus efficitur eros ut feugiat fermentum. Quisque orci magna, commodo eget erat eu, tincidunt hendrerit nisl.
        <p>
          {% if session.user_id %}
        <a href="/completed" class="btn-secondary btn-lg active" role="button" aria-pressed="true">View Completed Tasks</a>
          {% endif %}
    </div>
  </div>
</div>
{% endblock %}